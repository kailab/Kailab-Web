{% extends "KailabFrontendBundle::layout.html.twig" %}

{% block title %}
    {{ parent() }} - {{ 'Homepage' | trans }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {% javascripts
        'bundles/kailabfrontend/js/jquery-nivo_slider.js'
        'http://widgets.twimg.com/j/2/widget.js'
    %}
    <script src="{{ asset_url }}" type="text/javascript"></script>
    {% endjavascripts %}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {% stylesheets filter='cssrewrite'
        'bundles/kailabfrontend/css/homepage.css'
        'bundles/kailabfrontend/css/screenshots.css'
        'bundles/kailabfrontend/css/nivo_slider.css'
    %}
    <link rel="stylesheet" href="{{ asset_url }}" type="text/css" media="all" />
    {% endstylesheets %}
{% endblock %}

{% block content %}
<div class="maincontent">
    {% if slides %}
    <div id="slider">
        {% for slide in slides %}
            {% if slide.url %}
            <a href="{{ slide.url }}">
            {% endif %}
            <img src="{{ path('frontend_slide', {'id': slide.id })}}" alt="{{ slide.name }}"
            {% if slide.description %}title="#slidedescription_{{ slide.id }}" {% endif %} style="display: none"/>
            {% if slide.url %}
            </a>
            {% endif %}
        {% endfor %}
    </div>
    {% for slide in slides %}
    {% if slide.description %}
    <div id="slidedescription_{{ slide.id }}" class="slide_caption" style="display: none">
        {{ slide.description | raw }}
    </div>
    {% endif %}
    {% endfor %}
    {% endif %}

    <div id="blocks">
        {% if appli is defined %}
        <div class="block">
            <h2><a href="{{ path('frontend_applications') }}" title="{{ 'Apps' | trans }}">
                <img src="{{ asset('bundles/kailabfrontend/images/apps_small.png') }}" alt="{{ 'Apps' | trans }}" />
            </a></h2>
            
            {% if appli.screenshot %}
            <div class="screenshot_small {{ appli.screenshot.type}}_type">
                <div class="screen">
                    <img src="{{ path('frontend_screenshot_small', {'id':appli.screenshot.id}) }}" alt="{{ app.name }}" />
                </div>
            </div>
            {% endif %}

            <h3>{{ appli.name }}</h3>

            <div class="excerpt">
            {{ appli.excerpt | raw }}
            </div>

            <a href="{{ path('frontend_applications') }}" class="button">{{ 'Ver +' | trans }}</a>
        </div>
        {% endif %}
        {% if game is defined %}
        <div class="block">
            <a href="{{ path('frontend_videogames') }}" title="{{ 'Games' | trans }}">
                <img src="{{ asset('bundles/kailabfrontend/images/games_small.png') }}" alt="{{ 'Games' | trans }}" />
            </a>

            {% if game.screenshot %}
            <div class="screenshot_small {{ game.screenshot.type}}_type">
                <div class="screen">
                    <img src="{{ path('frontend_screenshot_small', {'id':game.screenshot.id}) }}" alt="{{ game.name }}" />
                </div>
            </div>
            {% endif %}

            <h3>{{ game.name }}</h3>

            <div class="excerpt">
            {{ game.excerpt | raw }}
            </div>

            <a href="{{ path('frontend_games') }}" class="button">{{ 'Ver +' | trans }}</a>
        </div>
        {% endif %}
        {% if post is defined %}
        <div class="block">
            <h2><a href="{{ path('frontend_blog') }}" title="{{ 'News' | trans }}">
                <img src="{{ asset('bundles/kailabfrontend/images/news_small.png') }}" alt="News" />
            </a></h2>

            {% if post.image.state %}
            <div class="side">
                <img src="{{ path('frontend_blog_post_image_small', {'id':post.id}) }}" alt="{{ post.title }}" />
            </div>
            {% endif %}

            <div class="main">
                <h3>{{ post.title }}</h3>

                <div class="excerpt">
                {{ post.excerpt | raw }}
                </div>

                <a href="{{ path('frontend_blog') }}" class="button">{{ 'Ver +' | trans }}</a>
            </div>
        </div>
        {% endif %}

        <div class="block">
            <a href="{{ path('frontend_tecnology') }}" title="{{ 'Tec' | trans }}">
                Tecnology
            </a>

        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function(){
        $('#slider').nivoSlider({
        });
    });
</script>


{% endblock %}
